<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>

<style>
    body {
        background-image: url("Arduino_Day_Layout.jpg");
        background-color: #ffffff;
        background-size: cover;
        img 
        {
            position: absolute;
            left: 0px;
            top: 0px;
            z-index: -1;
        }
    }
    .box {
        width: fit-content;
        height: cover;
        color: #ffffff;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .box1{
        background-color: rgb(0, 26, 255);
    }
    h2{
        position: relative;
        top:75px;
        left: 400px;
        font-size: small;
    }

</style>

</head>

<body>
    <script src="https://www.unpkg.com/@eohjsc/era-widget@1.0.14/src/index.js"></script>
    <script>
        console.log("anhbang");
  const eraWidget = new EraWidget();
  eraWidget.onConfiguration((config) => {
    console.log(config)
    eraWidget.requestHistories(
      new Date().getTime() - 1000 * 60 * 60 * 24,
      new Date().getTime()
    )
  })
        console.log("anhbang2");
  eraWidget.onHistories((histories) => {
    const categories = histories.map((item) => item.name);
    const temperatures = []
    const summarySeries = histories.map((item) => {
      const timeByTemp = {};
      item.data?.map((dataItem) => {
        const [temp, time] = JSON.parse(dataItem.y);
        if (!temperatures.includes(temp)) {
          temperatures.push(temp);
        }
        if (!timeByTemp[temp]) {
          timeByTemp[temp] = 0;
        }
        timeByTemp[temp] += time;
      });
      return timeByTemp;
    });
    const series = temperatures.sort().map((temp) => {
      return {
        name: temp,
        data: summarySeries.map((item) => item[temp] || 0),
      };
    });
  })
  eraWidget.ready();
  eraWidget.requestAdjustMobileHeight(500);
</script>
    console.log("abcd1");
    <script>
        console.log("abcd2");
        const eraWidget = new EraWidget();
        let config = null;
        eraWidget.onConfiguration((configuration) => {
          config = configuration.realtime_configs[0];
          console.log("config value", config);
        })
        eraWidget.onValues((values) => {
          var value = document.getElementById('demo').getAttribute(config);
          console.log("abc", value);
        //   input.checked = values[config.id].value;
        });
        eraWidget.ready()
      </script>
    <div>
        <h1 style="color: red"> E-Ra Arduino Day.</h1>
    </div>
    <div>
        <h2 class="box box1">Nhiệt độ phòng: <div id="demo" align="center"  value="1"></div></h2>
    </div>
    <div>
        <h2 class="box box1">Độ ẩm phòng: </h2>
    </div>
</body>
</html>
